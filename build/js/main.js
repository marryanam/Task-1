$(window).on("load",function(){$("body").fadeIn(1e3),new Swiper(".swiper-container",{effect:"fade",grabCursor:!1,centeredSlides:!0,slidesPerView:1,loop:!1,spaceBetween:109,fadeEffect:{crossFade:!0},pagination:{el:".swiper-pagination",clickable:!0}}).on("slideChange",function(){var e=this.activeIndex+1;$(".count").text("0"+e)})}),$(document).ready(function(){var t,n,a;$(".tab__item").each(function(){var e=$(".tab__img_i"),t=$(this).data("img");function n(){TweenLite.from(e,2,{ease:Power1.easeOut,opacity:0}),TweenLite.to(e,2,{ease:Power1.easeOut,opacity:1}),TweenLite.set(e,{attr:{src:t}},{ease:Power1.easeOut,opacity:1})}$(this).on("mouseenter",function(){setTimeout(n,200)})}),TweenLite.to(".circle_2",2,{ease:Power1.easeOut,scale:1}),TweenLite.to(".circle_5",2,{ease:Power1.easeOut,delay:2,scale:1}),$(".header__i").on("click",function(){$(this).toggleClass("active"),$(this).next().toggleClass("opened")}),window.matchMedia("(min-width: 600px)").matches&&(t=window.pageYOffset,window.onscroll=function(){var e=window.pageYOffset;document.getElementById("info").style.display=document.getElementById("adress").style.display=e<=t?(document.getElementById("headerScroll").classList.remove("scrolled"),"block"):(document.getElementById("headerScroll").classList.add("scrolled"),"none"),t=e},function(){TweenLite.set("#wrap",{perspective:600}),TweenLite.set("#wrap img",{xPercent:"-50%",yPercent:"-50%"});var e=document.getElementById("wrap"),t=window.innerWidth,n=window.innerHeight;for(i=0;i<6;i++){var a=document.createElement("div");TweenLite.set(a,{attr:{class:"leaf"},x:s(0,t),y:s(-200,-150),z:s(-200,200)}),e.appendChild(a),o=a,TweenMax.to(o,s(6,15),{y:n+100,ease:Linear.easeNone,repeat:-1,delay:-15}),TweenMax.to(o,s(4,8),{x:"+=100",rotationZ:s(0,180),repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(o,s(2,8),{rotationX:s(0,360),rotationY:s(0,360),repeat:-1,yoyo:!0,ease:Sine.easeInOut,delay:-5})}var o;function s(e,t){return e+Math.random()*(t-e)}}()),$("ul.tabs li").click(function(){var e=$(this).attr("data-tab");$("ul.tabs li").removeClass("current"),$(".tab__content").removeClass("current"),$(this).addClass("current"),$("#"+e).addClass("current")}),$(".popup-btn").click(function(e){var t=$(this).data("target"),n=$(".popup");$(".overlay").fadeIn(),$(t).toggleClass("active"),$("html,\nbody").css("overflow-y","hidden"),n.not(t).removeClass("active");var a=!0;$(document).bind("click.myEvent",function(e){var t=e.target;a||0!==$(e.target).closest(n).length||$(t).hasClass("popup_btn")||($(n).removeClass("active"),$(".overlay").fadeOut(),$(document).unbind("click.myEvent"),$("html,\nbody").css("overflow-y","visible")),a=!1}),$(".close").click(function(e){$(n).removeClass("active"),$(".overlay").hide(),$(document).unbind("click.myEvent"),$("html,\nbody").css("overflow-y","visible")})}),$(".form button").on("click",function(){$(".popup__content").hide(),$(".popup__gratitude").fadeIn("slow")}),$("input[type='tel']").bind("input blur focus click",function(e){var t=e.target,n="+__(___)-___-__-__",a=0,o=n.replace(/\D/g,""),i=t.value.replace(/\D/g,"");o.length>=i.length&&(i=o),t.value=n.replace(/./g,function(e){return/[_\d]/.test(e)&&a<i.length?i.charAt(a++):a>=i.length?"":e}),"blur"===e.type?2===t.value.length&&(t.value=""):function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}(t.value.length,t)}),n=$(".js_st"),(a=$(window)).on("scroll resize",function(){var e=a.height(),o=a.scrollTop(),i=o+e;$.each(n,function(){var e=$(this),t=e.outerHeight(),n=e.offset().top,a=n+t;o<=a&&n<=i?e.addClass("in-view"):e.removeClass("in-view")})}),a.trigger("scroll")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsIm9uIiwiZmFkZUluIiwiU3dpcGVyIiwiZWZmZWN0IiwiZ3JhYkN1cnNvciIsImNlbnRlcmVkU2xpZGVzIiwic2xpZGVzUGVyVmlldyIsImxvb3AiLCJzcGFjZUJldHdlZW4iLCJmYWRlRWZmZWN0IiwiY3Jvc3NGYWRlIiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwibnVtYiIsInRoaXMiLCJhY3RpdmVJbmRleCIsInRleHQiLCJkb2N1bWVudCIsInJlYWR5IiwicHJldlNjcm9sbHBvcyIsIiRhbmltYXRpb25fZWxlbWVudHMiLCIkd2luZG93IiwiZWFjaCIsImltYWdlIiwiYmxvY2siLCJkYXRhIiwiYW5pbUludCIsIlR3ZWVuTGl0ZSIsImZyb20iLCJlYXNlIiwiUG93ZXIxIiwiZWFzZU91dCIsIm9wYWNpdHkiLCJ0byIsInNldCIsImF0dHIiLCJzcmMiLCJzZXRUaW1lb3V0Iiwic2NhbGUiLCJkZWxheSIsInRvZ2dsZUNsYXNzIiwibmV4dCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwicGFnZVlPZmZzZXQiLCJvbnNjcm9sbCIsImN1cnJlbnRTY3JvbGxQb3MiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInBlcnNwZWN0aXZlIiwieFBlcmNlbnQiLCJ5UGVyY2VudCIsImNvbnRhaW5lciIsInciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0IiwiaSIsIkRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzcyIsIngiLCJSIiwieSIsInoiLCJhcHBlbmRDaGlsZCIsImVsbSIsIlR3ZWVuTWF4IiwiTGluZWFyIiwiZWFzZU5vbmUiLCJyZXBlYXQiLCJyb3RhdGlvbloiLCJ5b3lvIiwiU2luZSIsImVhc2VJbk91dCIsInJvdGF0aW9uWCIsInJvdGF0aW9uWSIsIm1pbiIsIm1heCIsIk1hdGgiLCJyYW5kb20iLCJyb3NlIiwiY2xpY2siLCJ0YWJfaWQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZSIsInRhcmdldCIsImZvcm0iLCJjc3MiLCJub3QiLCJmaXJzdENsaWNrIiwiYmluZCIsImRhdGFfdCIsImNsb3Nlc3QiLCJsZW5ndGgiLCJoYXNDbGFzcyIsImZhZGVPdXQiLCJ1bmJpbmQiLCJoaWRlIiwiZXZlbnQiLCJpdGVtIiwibnVtYmVyIiwiZGVmIiwicmVwbGFjZSIsInZhbCIsInZhbHVlIiwiYSIsInRlc3QiLCJjaGFyQXQiLCJ0eXBlIiwicG9zIiwiZWxlbWVudCIsImZvY3VzIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJjcmVhdGVUZXh0UmFuZ2UiLCJyYW5nZSIsImNvbGxhcHNlIiwibW92ZUVuZCIsIm1vdmVTdGFydCIsInNlbGVjdCIsInNldEN1cnNvclBvc2l0aW9uIiwid2luZG93X2hlaWdodCIsImhlaWdodCIsIndpbmRvd190b3BfcG9zaXRpb24iLCJzY3JvbGxUb3AiLCJ3aW5kb3dfYm90dG9tX3Bvc2l0aW9uIiwiJGVsZW1lbnQiLCJlbGVtZW50X2hlaWdodCIsIm91dGVySGVpZ2h0IiwiZWxlbWVudF90b3BfcG9zaXRpb24iLCJvZmZzZXQiLCJ0b3AiLCJlbGVtZW50X2JvdHRvbV9wb3NpdGlvbiIsInRyaWdnZXIiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxRQUFRQyxHQUFHLE9BQVEsV0FDakJGLEVBQUUsUUFBUUcsT0FBTyxLQUdGLElBQUlDLE9BQU8sb0JBQXFCLENBQzNDQyxPQUFRLE9BQ1JDLFlBQVksRUFDWkMsZ0JBQWdCLEVBQ2hCQyxjQUFlLEVBQ2ZDLE1BQU0sRUFDTkMsYUFBYyxJQUNkQyxXQUFZLENBQ1JDLFdBQVcsR0FFZkMsV0FBWSxDQUNSQyxHQUFJLHFCQUNKQyxXQUFXLEtBR1ZiLEdBQUcsY0FBZSxXQUN2QixJQUFJYyxFQUFPQyxLQUFLQyxZQUFjLEVBQzlCbEIsRUFBRSxVQUFVbUIsS0FBSyxJQUFNSCxPQUkvQmhCLEVBQUVvQixVQUFVQyxNQUFNLFdBcURkLElBQ1FD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QUVWRixFQUFLSyxNQUFRSixFQUFPRSxRQUFRLEtBQU0sU0FBU0csR0FDdkMsTUFBTyxRQUFRQyxLQUFLRCxJQUFNbEQsRUFBSWdELEVBQUlWLE9BQVNVLEVBQUlJLE9BQU9wRCxLQUFPQSxHQUFLZ0QsRUFBSVYsT0FBUyxHQUFLWSxJQUdyRSxTQUFmUCxFQUFNVSxLQUNvQixJQUF0QlQsRUFBS0ssTUFBTVgsU0FDWE0sRUFBS0ssTUFBUSxJQTVCekIsU0FBMkJLLEVBQUtDLEdBRTVCLEdBREFBLEVBQVFDLFFBQ0pELEVBQVFFLGtCQUNSRixFQUFRRSxrQkFBa0JILEVBQUtBLFFBQzVCLEdBQUlDLEVBQVFHLGdCQUFpQixDQUNoQyxJQUFJQyxFQUFRSixFQUFRRyxrQkFDcEJDLEVBQU1DLFVBQVMsR0FDZkQsRUFBTUUsUUFBUSxZQUFhUCxHQUMzQkssRUFBTUcsVUFBVSxZQUFhUixHQUM3QkssRUFBTUksVUFzQk5DLENBQWtCcEIsRUFBS0ssTUFBTVgsT0FBUU0sS0FTckNyRixFQUFzQnZCLEVBQUUsV0FDeEJ3QixFQUFVeEIsRUFBRUMsU0FDUkMsR0FBRyxnQkFHWCxXQUNJLElBQUkrSCxFQUFnQnpHLEVBQVEwRyxTQUN4QkMsRUFBc0IzRyxFQUFRNEcsWUFDOUJDLEVBQTBCRixFQUFzQkYsRUFFcERqSSxFQUFFeUIsS0FBS0YsRUFBcUIsV0FDeEIsSUFBSStHLEVBQVd0SSxFQUFFaUIsTUFDYnNILEVBQWlCRCxFQUFTRSxjQUMxQkMsRUFBdUJILEVBQVNJLFNBQVNDLElBQ3pDQyxFQUEyQkgsRUFBdUJGLEVBR3RCSixHQUEzQlMsR0FDQUgsR0FBd0JKLEVBQ3pCQyxFQUFTMUMsU0FBUyxXQUVsQjBDLEVBQVMzQyxZQUFZLGVBbEJqQ25FLEVBQVFxSCxRQUFRIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbigpe1xyXG4gICAgJCgnYm9keScpLmZhZGVJbigxMDAwKTtcclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICBzbGlkZXIgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICB2YXIgbXlTd2lwZXIgPSBuZXcgU3dpcGVyKFwiLnN3aXBlci1jb250YWluZXJcIiwge1xyXG4gICAgICAgIGVmZmVjdDogJ2ZhZGUnLFxyXG4gICAgICAgIGdyYWJDdXJzb3I6IGZhbHNlLFxyXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMDksXHJcbiAgICAgICAgZmFkZUVmZmVjdDoge1xyXG4gICAgICAgICAgICBjcm9zc0ZhZGU6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgbXlTd2lwZXIub24oJ3NsaWRlQ2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG51bWIgPSB0aGlzLmFjdGl2ZUluZGV4ICsgMTtcclxuICAgICAgICAkKCcuY291bnQnKS50ZXh0KFwiMFwiICsgbnVtYik7XHJcbiAgICB9KTtcclxuXHJcbn0pO1xyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICBhbmltYXRpb24gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAkKCcudGFiX19pdGVtJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgaW1hZ2UgPSAkKCcudGFiX19pbWdfaScpO1xyXG4gICAgICAgIHZhciBibG9jayA9ICQodGhpcykuZGF0YSgnaW1nJyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFuaW1JbnQoKSB7XHJcbiAgICAgICAgICAgIFR3ZWVuTGl0ZS5mcm9tKGltYWdlLCAyLCB7IGVhc2U6IFBvd2VyMS5lYXNlT3V0LCBvcGFjaXR5OiAwfSk7XHJcbiAgICAgICAgICAgIFR3ZWVuTGl0ZS50byhpbWFnZSwgMiwgeyBlYXNlOiBQb3dlcjEuZWFzZU91dCwgb3BhY2l0eTogMX0pO1xyXG4gICAgICAgICAgICBUd2VlbkxpdGUuc2V0KGltYWdlLCB7IGF0dHI6IHsgc3JjOiBibG9jayB9fSwgeyBlYXNlOiBQb3dlcjEuZWFzZU91dCwgb3BhY2l0eTogMX0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKHRoaXMpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoYW5pbUludCwgMjAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIFR3ZWVuTGl0ZS50bygnLmNpcmNsZV8yJywgMiwgeyBlYXNlOiBQb3dlcjEuZWFzZU91dCwgc2NhbGU6IDF9KTtcclxuICAgIFR3ZWVuTGl0ZS50bygnLmNpcmNsZV81JywgMiwgeyBlYXNlOiBQb3dlcjEuZWFzZU91dCwgZGVsYXk6IDIsIHNjYWxlOiAxfSk7XHJcblxyXG4gICAgJCgnLmhlYWRlcl9faScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5uZXh0KCkudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgcm9zZSBsZWFmICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4gICAgZnVuY3Rpb24gcm9zZSgpe1xyXG4gICAgICAgIHZhciBmYWxsaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgVHdlZW5MaXRlLnNldChcIiN3cmFwXCIse3BlcnNwZWN0aXZlOjYwMH0pXHJcbiAgICAgICAgVHdlZW5MaXRlLnNldChcIiN3cmFwIGltZ1wiLHt4UGVyY2VudDpcIi01MCVcIix5UGVyY2VudDpcIi01MCVcIn0pXHJcblxyXG4gICAgICAgIHZhciB0b3RhbCA9IDY7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid3JhcFwiKSwgICB3ID0gd2luZG93LmlubmVyV2lkdGggLCBoID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgICBcclxuICAgICAgICBmb3IgKGk9MDsgaTx0b3RhbDsgaSsrKXsgXHJcbiAgICAgICAgICAgdmFyIERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgIFR3ZWVuTGl0ZS5zZXQoRGl2LHthdHRyOntjbGFzczonbGVhZid9LHg6UigwLHcpLHk6UigtMjAwLC0xNTApLHo6UigtMjAwLDIwMCl9KTtcclxuICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoRGl2KTtcclxuICAgICAgICAgICBhbmltbShEaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgICAgICAgZnVuY3Rpb24gYW5pbW0oZWxtKXsgICBcclxuICAgICAgICAgICBUd2Vlbk1heC50byhlbG0sUig2LDE1KSx7eTpoKzEwMCxlYXNlOkxpbmVhci5lYXNlTm9uZSxyZXBlYXQ6LTEsZGVsYXk6LTE1fSk7XHJcbiAgICAgICAgICAgVHdlZW5NYXgudG8oZWxtLFIoNCw4KSx7eDonKz0xMDAnLHJvdGF0aW9uWjpSKDAsMTgwKSxyZXBlYXQ6LTEseW95bzp0cnVlLGVhc2U6U2luZS5lYXNlSW5PdXR9KTtcclxuICAgICAgICAgICBUd2Vlbk1heC50byhlbG0sUigyLDgpLHtyb3RhdGlvblg6UigwLDM2MCkscm90YXRpb25ZOlIoMCwzNjApLHJlcGVhdDotMSx5b3lvOnRydWUsZWFzZTpTaW5lLmVhc2VJbk91dCxkZWxheTotNX0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIFIobWluLG1heCkge3JldHVybiBtaW4rTWF0aC5yYW5kb20oKSoobWF4LW1pbil9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAgIGhlYWRlciBtZW51IHNob3cvaGlkZSAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICBmdW5jdGlvbiBoZWFkZXJTY3JvbGwoKXtcclxuICAgICAgICB2YXIgcHJldlNjcm9sbHBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICAgICAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGxQb3MgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgICAgICAgICAgIGlmIChwcmV2U2Nyb2xscG9zID49IGN1cnJlbnRTY3JvbGxQb3MpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyU2Nyb2xsXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJzY3JvbGxlZFwiKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRyZXNzXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZm9cIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyU2Nyb2xsXCIpLmNsYXNzTGlzdC5hZGQoXCJzY3JvbGxlZFwiKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRyZXNzXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5mb1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJldlNjcm9sbHBvcyA9IGN1cnJlbnRTY3JvbGxQb3M7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDYwMHB4KVwiKS5tYXRjaGVzKSB7XHJcbiAgICAgICAgaGVhZGVyU2Nyb2xsKCk7XHJcbiAgICAgICAgcm9zZSgpO1xyXG4gICAgfSBcclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgIHRhYnMgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAkKCd1bC50YWJzIGxpJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRhYl9pZCA9ICQodGhpcykuYXR0cignZGF0YS10YWInKTtcclxuXHJcbiAgICAgICAgJCgndWwudGFicyBsaScpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgJCgnLnRhYl9fY29udGVudCcpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XHJcblxyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgICAkKFwiI1wiICsgdGFiX2lkKS5hZGRDbGFzcygnY3VycmVudCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgcG9wdXAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgJCgnLnBvcHVwLWJ0bicpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5kYXRhKCd0YXJnZXQnKSxcclxuICAgICAgICAgICAgZm9ybSA9ICQoJy5wb3B1cCcpO1xyXG4gICAgICAgICQoJy5vdmVybGF5JykuZmFkZUluKCk7XHJcbiAgICAgICAgJCh0YXJnZXQpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKCdodG1sLFxcbicgKyAnYm9keScpLmNzcygnb3ZlcmZsb3cteScsICdoaWRkZW4nKTtcclxuICAgICAgICBmb3JtLm5vdCh0YXJnZXQpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB2YXIgZmlyc3RDbGljayA9IHRydWU7XHJcbiAgICAgICAgJChkb2N1bWVudCkuYmluZCgnY2xpY2subXlFdmVudCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFfdCA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICBpZiAoIWZpcnN0Q2xpY2sgJiYgJChlLnRhcmdldCkuY2xvc2VzdChmb3JtKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICghJChkYXRhX3QpLmhhc0NsYXNzKCdwb3B1cF9idG4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZm9ybSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5vdmVybGF5JykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgnY2xpY2subXlFdmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsXFxuJyArICdib2R5JykuY3NzKCdvdmVyZmxvdy15JywgJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaXJzdENsaWNrID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLmNsb3NlJykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAkKGZvcm0pLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLm92ZXJsYXknKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgnY2xpY2subXlFdmVudCcpO1xyXG4gICAgICAgICAgICAkKCdodG1sLFxcbicgKyAnYm9keScpLmNzcygnb3ZlcmZsb3cteScsICd2aXNpYmxlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuZm9ybSBidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcucG9wdXBfX2NvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLnBvcHVwX19ncmF0aXR1ZGUnKS5mYWRlSW4oJ3Nsb3cnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAgICAgICAgIG1hc2sgdGVsICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgZnVuY3Rpb24gc2V0Q3Vyc29yUG9zaXRpb24ocG9zLCBlbGVtZW50KSB7XHJcbiAgICAgICAgZWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgIGlmIChlbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UocG9zLCBwb3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5jcmVhdGVUZXh0UmFuZ2UpIHtcclxuICAgICAgICAgICAgdmFyIHJhbmdlID0gZWxlbWVudC5jcmVhdGVUZXh0UmFuZ2UoKTtcclxuICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgIHJhbmdlLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIiwgcG9zKTtcclxuICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIHBvcyk7XHJcbiAgICAgICAgICAgIHJhbmdlLnNlbGVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtYXNrKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgdmFyIG51bWJlciA9IFwiK19fKF9fXyktX19fLV9fLV9fXCIsXHJcbiAgICAgICAgICAgIGkgPSAwLFxyXG4gICAgICAgICAgICBkZWYgPSBudW1iZXIucmVwbGFjZSgvXFxEL2csIFwiXCIpLFxyXG4gICAgICAgICAgICB2YWwgPSBpdGVtLnZhbHVlLnJlcGxhY2UoL1xcRC9nLCBcIlwiKTtcclxuICAgICAgICBpZiAoZGVmLmxlbmd0aCA+PSB2YWwubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhbCA9IGRlZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaXRlbS52YWx1ZSA9IG51bWJlci5yZXBsYWNlKC8uL2csIGZ1bmN0aW9uKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC9bX1xcZF0vLnRlc3QoYSkgJiYgaSA8IHZhbC5sZW5ndGggPyB2YWwuY2hhckF0KGkrKykgOiBpID49IHZhbC5sZW5ndGggPyBcIlwiIDogYTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwiYmx1clwiKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaXRlbS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZXRDdXJzb3JQb3NpdGlvbihpdGVtLnZhbHVlLmxlbmd0aCwgaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHRlbCA9ICQoXCJpbnB1dFt0eXBlPSd0ZWwnXVwiKTtcclxuICAgIHRlbC5iaW5kKFwiaW5wdXQgYmx1ciBmb2N1cyBjbGlja1wiLCBtYXNrKTtcclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICBhbmltYXRpb24gb24gc2Nyb2xsICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgIGZ1bmN0aW9uIGFuaW1hdGlvVHJpZ2dlcigpIHtcclxuICAgICAgICB2YXIgJGFuaW1hdGlvbl9lbGVtZW50cyA9ICQoJy5qc19zdCcpO1xyXG4gICAgICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG4gICAgICAgICR3aW5kb3cub24oJ3Njcm9sbCByZXNpemUnLCBjaGVja19pZl9pbl92aWV3KTtcclxuICAgICAgICAkd2luZG93LnRyaWdnZXIoJ3Njcm9sbCcpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjaGVja19pZl9pbl92aWV3KCkge1xyXG4gICAgICAgICAgICB2YXIgd2luZG93X2hlaWdodCA9ICR3aW5kb3cuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciB3aW5kb3dfdG9wX3Bvc2l0aW9uID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgdmFyIHdpbmRvd19ib3R0b21fcG9zaXRpb24gPSAod2luZG93X3RvcF9wb3NpdGlvbiArIHdpbmRvd19oZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKCRhbmltYXRpb25fZWxlbWVudHMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50X2hlaWdodCA9ICRlbGVtZW50Lm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudF90b3BfcG9zaXRpb24gPSAkZWxlbWVudC5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudF9ib3R0b21fcG9zaXRpb24gPSAoZWxlbWVudF90b3BfcG9zaXRpb24gKyBlbGVtZW50X2hlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9jaGVjayB0byBzZWUgaWYgdGhpcyBjdXJyZW50IGNvbnRhaW5lciBpcyB3aXRoaW4gdmlld3BvcnRcclxuICAgICAgICAgICAgICAgIGlmICgoZWxlbWVudF9ib3R0b21fcG9zaXRpb24gPj0gd2luZG93X3RvcF9wb3NpdGlvbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAoZWxlbWVudF90b3BfcG9zaXRpb24gPD0gd2luZG93X2JvdHRvbV9wb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnaW4tdmlldycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcygnaW4tdmlldycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgYW5pbWF0aW9UcmlnZ2VyKCk7XHJcblxyXG5cclxufSk7Il19
